body = <<-EOF
<meta name="citation_title" content="ResumableFunctions: C# sharp style generators for Julia.">
<meta name="citation_author" content="Lauwens, Ben">
<meta name="citation_publication_date" content="2017//">
<meta name="citation_journal_title" content="The Journal of Open Source Software">
<meta name="citation_pdf_url" content="http://www.theoj.org/joss-papers/joss.00400/10.21105.joss.00400.pdf">
<meta name="citation_doi" content="10.21105/joss.00400">
<meta name="citation_issn" content="2475-9066">
<div class="accepted-paper">
  <h1>ResumableFunctions: C# sharp style generators for Julia.</h1>
  <div class="columns links">
    <div class="column four-fifths" style="padding-bottom: 10px;">
      <strong>Authors</strong>
      <ul class="author-list">
            <li><a href="http://orcid.org/0000-0003-0761-6265" target="_blank">Ben Lauwens</a></li>
            </ul>
    </div>
    <div class="one-third column">
      <span class="repo">Repository:<br /><a href="https://github.com/BenLauwens/ResumableFunctions.jl.git">Repository link &raquo;</a></span>
    </div>
    <div class="one-third column">
      <span class="paper">Paper:<br /><a href="http://www.theoj.org/joss-papers/joss.00400/10.21105.joss.00400.pdf">PDF link &raquo;</a></span>
    </div>
    <div class="one-third column">
      <span class="paper">Review:<br /><a href="https://github.com/openjournals/joss-reviews/issues/400">View review issue &raquo;</a></span>
    </div>

    <div class="one-third column" style="padding-top: 20px;">
      <span class="repo">DOI:<br /><a href="https://doi.org/10.21105/joss.00400">https://doi.org/10.21105/joss.00400</a></span>
    </div>
    <div class="one-third column" style="padding-top: 20px;">
      <span class="paper">Status badge:<br /><img src="http://joss.theoj.org/papers/10.21105/joss.00400/status.svg"></span>
    </div>
    <div class="one-third column" style="padding-top: 20px;">
      <span class="paper">Citation:<br />
      <small>Lauwens, (2017). ResumableFunctions: C# sharp style generators for Julia.. <em>Journal of Open Source Software</em>, 2(18), 400, doi:10.21105/joss.00400</small>
    </div>
  </div>
  <div class="paper-body">
  <h1 id="summary">Summary</h1>
  <p>C# has a convenient way to create iterators <span class="citation">(Microsoft 2017)</span> using the <code>yield return</code> statement. The package <span class="citation">(Lauwens 2017a)</span> provides the same functionality for the Julia language <span class="citation">(Bezanson et al. 2017)</span> by introducing the <code>@resumable</code> and the <code>@yield</code> macros. These macros can be used to replace the <code>Task</code> switching functions <code>produce</code> and <code>consume</code> which were deprecated in Julia v0.6. <code>Channels</code> are the preferred way for inter-task communication in julia v0.6+, but their performance is subpar for iterator applications.</p>
  <p>The macro <code>@resumable</code> transform a function definition into a finite state-machine, i.e. a callable type holding the state and references to the internal variables of the function and a constructor for this new type respecting the method signature of the original function definition. When calling the new type a modified version of the body of the original function definition is executed: - a dispatch mechanism is inserted at the start to allow a non local jump to a label inside the body; - the <code>@yield</code> statement is replaced by a <code>return</code> statement and a label placeholder as endpoint of a non local jump; - <code>for</code> loops are transformed in <code>while</code> loops and - <code>try</code>-<code>catch</code>-<code>finally</code>-<code>end</code> expressions are converted in a sequence of <code>try</code>-<code>catch</code>-<code>end</code> expressions with at the end of the <code>catch</code> part a non local jump to a label that marks the beginning of the expressions in the <code>finally</code> part. The two last transformations are needed to overcome the limitations of the non local jump macros <code>@goto</code> and <code>@label</code>.</p>
  <p>Straightforward two-way communication between the caller and the callable type is possible by calling the callable type with an extra argument. The value of this argument is passed to the left side of an <code>arg = @yield ret</code> expression.</p>
  <p>The <code>iterator</code> interface is implemented so that a <code>@resumable function</code> can be used transparently.</p>
  <p>Benchmarks show that this macro based implementation of semi-coroutines is an order of magnitude faster than both the original <code>Task</code> switching with <code>produce</code> and <code>consume</code> and the newer <code>Channel</code> based approach for inter-task communication. A context switch is more expensive than a function call.</p>
  <p>The next generation of process-driven simulations in the discrete-event simulation framework <span class="citation">(Lauwens 2017b)</span> is based on this package.</p>
  <h1 id="references" class="unnumbered">References</h1>
  <div id="refs" class="references">
  <div id="ref-Julia">
  <p>Bezanson, Jeff, Alan Edelman, Stefan Karpinski, and Viral B. Shah. 2017. &#8220;Julia: A Fresh Approach to Numerical Computing.&#8221; <em>SIAM Review</em>, no. 59. SIAM: 65&#8211;98. doi:<a href="https://doi.org/https://doi.org/10.1137/141000671">https://doi.org/10.1137/141000671</a>.</p>
  </div>
  <div id="ref-ResumableFunctions">
  <p>Lauwens, Ben. 2017a. &#8220;ResumableFunctions: C# Sharp Style Generators A.k.a. Semi-Coroutines for Julia.&#8221; <a href="https://github.com/BenLauwens/ResumableFunctions.jl.git" class="uri">https://github.com/BenLauwens/ResumableFunctions.jl.git</a>.</p>
  </div>
  <div id="ref-SimJulia">
  <p>&#8212;&#8212;&#8212;. 2017b. &#8220;SimJulia: Discrete Event Process Oriented Simulation Framework Written in Julia.&#8221; <a href="https://github.com/BenLauwens/SimJulia.jl.git" class="uri">https://github.com/BenLauwens/SimJulia.jl.git</a>.</p>
  </div>
  <div id="ref-CIterators">
  <p>Microsoft. 2017. &#8220;Iterators (c#).&#8221; <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/iterators" class="uri">https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/iterators</a>.</p>
  </div>
  </div>
  </div>
</div>
EOF
